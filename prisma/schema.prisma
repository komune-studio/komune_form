generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model book_categories {
  id          Int         @id @default(autoincrement())
  category_id Int?
  book_id     Int
  books       books       @relation(fields: [book_id], references: [id], map: "FK_BOOK_CATEGORIES_BOOK_ID")
  categories  categories? @relation(fields: [category_id], references: [id], onDelete: Restrict, map: "FK_BOOK_CATEGORIES_CATEGORY_ID")

  @@unique([book_id, category_id], map: "unique_book_category")
  @@index([category_id], map: "FK_BOOK_CATEGORIES_CATEGORY_ID")
}

model books {
  id                             Int                @id @default(autoincrement())
  publisher_id                   Int?
  illustrator_id                 Int?
  translator_id                  Int?
  title                          String             @db.VarChar(255)
  title_tl                       String?            @db.VarChar(255)
  description                    String?            @db.Text
  description_tl                 String?            @db.Text
  image_cover                    String?            @db.Text
  release_date                   DateTime?          @db.DateTime(0)
  isbn                           String?            @db.VarChar(21)
  total_page                     Int?
  initial_language               String?
  translation_rights             Boolean?
  contact_person_name            String?
  contact_person_email           String?
  available_languages            Json?
  highlight                      Boolean?           @default(false)
  hide                           Boolean?           @default(false)
  meta_title                     String?            @db.VarChar(255)
  meta_description               String?            @db.Text
  created_at                     DateTime           @default(now()) @db.Timestamp(0)
  modified_at                    DateTime           @default(now()) @db.Timestamp(0)
  created_by                     Int?
  modified_by                    Int?
  active                         Boolean            @default(true)
  literary_agency_id             Int?
  book_authors                   book_authors[]
  book_categories                book_categories[]
  users_books_created_byTousers  users?             @relation("books_created_byTousers", fields: [created_by], references: [id], onDelete: Restrict, map: "fk_books_created_by")
  illustrators                   illustrators?      @relation(fields: [illustrator_id], references: [id], onDelete: Restrict, map: "fk_books_illustrator_id")
  literary_agencies              literary_agencies? @relation(fields: [literary_agency_id], references: [id], onUpdate: NoAction, map: "fk_books_literary_agency_id")
  users_books_modified_byTousers users?             @relation("books_modified_byTousers", fields: [modified_by], references: [id], onDelete: Restrict, map: "fk_books_modified_by")
  publishers                     publishers?        @relation(fields: [publisher_id], references: [id], onDelete: Restrict, map: "fk_books_publisher_id")
  translators                    translators?       @relation(fields: [translator_id], references: [id], onDelete: Restrict, map: "fk_books_translator_id")

  @@index([created_by], map: "fk_books_created_by")
  @@index([illustrator_id], map: "fk_books_illustrator_id")
  @@index([modified_by], map: "fk_books_modified_by")
  @@index([publisher_id], map: "fk_books_publisher_id")
  @@index([translator_id], map: "fk_books_translator_id")
  @@index([literary_agency_id], map: "idx_books_literary_agency_id")
}

model categories {
  id                                  Int               @id @default(autoincrement())
  name                                String            @unique(map: "name") @db.VarChar(100)
  name_tl                             String?           @db.VarChar(100)
  description                         String?           @db.Text
  description_tl                      String?           @db.Text
  created_at                          DateTime?         @default(now()) @db.Timestamp(0)
  created_by                          Int
  modified_at                         DateTime          @db.DateTime(0)
  modified_by                         Int
  active                              Boolean           @default(true)
  book_categories                     book_categories[]
  users_categories_created_byTousers  users             @relation("categories_created_byTousers", fields: [created_by], references: [id], onUpdate: NoAction, map: "FK_CATEGORY_CREATED_BY")
  users_categories_modified_byTousers users             @relation("categories_modified_byTousers", fields: [modified_by], references: [id], onUpdate: NoAction, map: "FK_CATEGORY_MODIFIED_BY")

  @@index([created_by], map: "FK_CATEGORY_CREATED_BY")
  @@index([modified_by], map: "FK_CATEGORY_MODIFIED_BY")
}

model illustrators {
  id                                    Int       @id @default(autoincrement())
  name                                  String    @db.VarChar(255)
  email                                 String?   @db.VarChar(100)
  phone_number                          String?   @db.VarChar(50)
  website_url                           String?   @db.Text
  profile_picture                       String?   @db.Text
  facebook                              String?   @db.VarChar(255)
  instagram                             String?   @db.VarChar(255)
  tiktok                                String?   @db.VarChar(255)
  twitter                               String?   @db.VarChar(255)
  youtube                               String?   @db.VarChar(255)
  biography                             String?   @db.Text
  biography_tl                          String?   @db.Text
  hide                                  Boolean?  @default(false)
  created_at                            DateTime? @default(now()) @db.Timestamp(0)
  created_by                            Int?
  modified_at                           DateTime  @db.DateTime(0)
  modified_by                           Int?
  active                                Boolean
  books                                 books[]
  users_illustrators_created_byTousers  users?    @relation("illustrators_created_byTousers", fields: [created_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "FK_ILLUSTRATOR_CREATED_BY")
  users_illustrators_modified_byTousers users?    @relation("illustrators_modified_byTousers", fields: [modified_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "FK_ILLUSTRATOR_MODIFIED_BY")

  @@index([created_by], map: "FK_ILLUSTRATOR_CREATED_BY")
  @@index([modified_by], map: "FK_ILLUSTRATOR_MODIFIED_BY")
}

model literary_agencies {
  id               Int       @id @default(autoincrement())
  name             String    @db.VarChar(255)
  description      String?   @db.Text
  description_tl   String?   @db.Text
  address          String?   @db.Text
  phone            String?   @db.VarChar(50)
  email            String?   @db.VarChar(100)
  agency_logo      String?   @db.Text
  website_url      String?   @db.Text
  facebook         String?   @db.Text
  instagram        String?   @db.Text
  tiktok           String?   @db.Text
  twitter          String?   @db.Text
  youtube          String?   @db.Text
  hide             Boolean?  @default(false)
  meta_title       String?   @db.VarChar(255)
  meta_description String?   @db.Text
  created_at       DateTime  @default(now()) @db.Timestamp(0)
  modified_at      DateTime? @default(now()) @db.Timestamp(0)
  active           Boolean   @default(true)
  books            books[]
}

model publishers {
  id                                  Int       @id @default(autoincrement())
  name                                String    @db.VarChar(255)
  description                         String?   @db.Text
  description_tl                      String?   @db.Text
  address                             String?   @db.Text
  phone                               String?   @db.VarChar(50)
  email                               String?   @db.VarChar(100)
  publisher_logo                      String?   @db.Text
  facebook                            String?   @db.Text
  instagram                           String?   @db.Text
  tiktok                              String?   @db.Text
  twitter                             String?   @db.Text
  youtube                             String?   @db.Text
  website_url                         String?   @db.Text
  hide                                Boolean?  @default(false)
  meta_title                          String?   @db.VarChar(255)
  meta_description                    String?   @db.Text
  created_at                          DateTime? @default(now()) @db.Timestamp(0)
  created_by                          Int
  modified_at                         DateTime? @db.DateTime(0)
  modified_by                         Int?
  active                              Boolean   @default(true)
  books                               books[]
  users_publishers_created_byTousers  users     @relation("publishers_created_byTousers", fields: [created_by], references: [id], onUpdate: NoAction, map: "FK_PUBLISHER_CREATED_BY")
  users_publishers_modified_byTousers users?    @relation("publishers_modified_byTousers", fields: [modified_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "FK_PUBLISHER_MODIFIED_BY")

  @@index([created_by], map: "FK_PUBLISHER_CREATED_BY")
  @@index([modified_by], map: "FK_PUBLISHER_MODIFIED_BY")
}

model translators {
  id              Int       @id @default(autoincrement())
  name            String    @db.VarChar(255)
  email           String?   @db.VarChar(100)
  phone           String?   @db.VarChar(100)
  website_url     String?   @db.Text
  profile_picture String?   @db.Text
  facebook        String?   @db.VarChar(255)
  instagram       String?   @db.VarChar(255)
  tiktok          String?   @db.VarChar(255)
  twitter         String?   @db.VarChar(255)
  youtube         String?   @db.VarChar(255)
  biography       String?   @db.Text
  biography_tl    String?   @db.Text
  languages       String?   @db.Text
  hide            Boolean?  @default(false)
  created_at      DateTime? @default(now()) @db.Timestamp(0)
  books           books[]
}

model users {
  id                                           Int            @id @default(autoincrement())
  username                                     String         @unique @db.VarChar(100)
  password                                     String
  salt                                         String
  role                                         users_role
  created_at                                   DateTime       @default(now()) @db.Timestamp(0)
  modified_at                                  DateTime       @default(now()) @db.Timestamp(0)
  active                                       Boolean        @default(true)
  authors_authors_created_byTousers            authors[]      @relation("authors_created_byTousers")
  authors_authors_modified_byTousers           authors[]      @relation("authors_modified_byTousers")
  book_authors                                 book_authors[]
  book_authors_book_authors_modified_byTousers book_authors[] @relation("book_authors_modified_byTousers")
  books_books_created_byTousers                books[]        @relation("books_created_byTousers")
  books_books_modified_byTousers               books[]        @relation("books_modified_byTousers")
  categories_categories_created_byTousers      categories[]   @relation("categories_created_byTousers")
  categories_categories_modified_byTousers     categories[]   @relation("categories_modified_byTousers")
  illustrators_illustrators_created_byTousers  illustrators[] @relation("illustrators_created_byTousers")
  illustrators_illustrators_modified_byTousers illustrators[] @relation("illustrators_modified_byTousers")
  news_news_created_byTousers                  news[]         @relation("news_created_byTousers")
  news_news_modified_byTousers                 news[]         @relation("news_modified_byTousers")
  publishers_publishers_created_byTousers      publishers[]   @relation("publishers_created_byTousers")
  publishers_publishers_modified_byTousers     publishers[]   @relation("publishers_modified_byTousers")
}

model authors {
  id                               Int            @id @default(autoincrement())
  name                             String         @db.VarChar(255)
  biography                        String?        @db.Text
  biography_tl                     String?        @db.Text
  profile_picture                  String?        @db.Text
  awards                           String?        @db.Text
  facebook                         String?        @db.VarChar(255)
  instagram                        String?        @db.VarChar(255)
  tiktok                           String?        @db.VarChar(255)
  twitter                          String?        @db.VarChar(255)
  youtube                          String?        @db.VarChar(255)
  phone                            String?        @db.VarChar(50)
  email                            String?        @db.VarChar(100)
  website_url                      String?        @db.Text
  hide                             Boolean?       @default(false)
  meta_title                       String?        @db.VarChar(255)
  meta_description                 String?        @db.Text
  created_at                       DateTime?      @default(now()) @db.Timestamp(0)
  created_by                       Int?
  modified_at                      DateTime?      @default(now()) @db.Timestamp(0)
  modified_by                      Int?
  active                           Boolean?       @default(true)
  users_authors_created_byTousers  users?         @relation("authors_created_byTousers", fields: [created_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "authors_ibfk_1")
  users_authors_modified_byTousers users?         @relation("authors_modified_byTousers", fields: [modified_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "authors_ibfk_2")
  book_authors                     book_authors[]

  @@index([created_by], map: "created_by")
  @@index([modified_by], map: "modified_by")
}

model book_authors {
  id                                    Int       @id @default(autoincrement())
  book_id                               Int
  author_id                             Int
  created_at                            DateTime? @default(now()) @db.Timestamp(0)
  created_by                            Int?
  modified_at                           DateTime? @default(now()) @db.Timestamp(0)
  modified_by                           Int?
  books                                 books     @relation(fields: [book_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "book_authors_ibfk_1")
  authors                               authors   @relation(fields: [author_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "book_authors_ibfk_2")
  users                                 users?    @relation(fields: [created_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "book_authors_ibfk_3")
  users_book_authors_modified_byTousers users?    @relation("book_authors_modified_byTousers", fields: [modified_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_book_authors_modified_by")

  @@unique([book_id, author_id], map: "unique_book_author")
  @@index([author_id], map: "author_id")
  @@index([created_by], map: "created_by")
  @@index([modified_by], map: "idx_book_authors_modified_by")
}

model news {
  id                            Int       @id @default(autoincrement())
  title                         String    @db.VarChar(255)
  title_tl                      String?   @db.VarChar(255)
  body                          String    @db.Text
  body_tl                       String?   @db.Text
  summary                       String?   @db.Text
  summary_tl                    String?   @db.Text
  image_cover                   String?   @db.Text
  video_url                     String?   @db.Text
  highlight                     Boolean?  @default(false)
  hide                          Boolean?  @default(false)
  meta_title                    String?   @db.VarChar(255)
  meta_description              String?   @db.Text
  created_at                    DateTime? @default(now()) @db.Timestamp(0)
  created_by                    Int?
  modified_at                   DateTime? @default(now()) @db.Timestamp(0)
  modified_by                   Int?
  users_news_created_byTousers  users?    @relation("news_created_byTousers", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "news_ibfk_1")
  users_news_modified_byTousers users?    @relation("news_modified_byTousers", fields: [modified_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "news_ibfk_2")

  @@index([created_by], map: "created_by")
  @@index([modified_by], map: "modified_by")
}

model members {
  id                          Int       @id @default(autoincrement())
  first_name                  String
  last_name                   String
  country                     String
  email                       String    @unique(map: "email")
  password                    String    @db.Text
  publishing_house            String?
  salt                        String    @db.Text
  forget_password_token       String?
  forget_password_valid_until DateTime? @db.Timestamp(0)
  created_at                  DateTime  @default(now()) @db.DateTime(0)
  modified_at                 DateTime? @db.DateTime(0)
  active                      Boolean   @default(true)
  grants                      grants[]
}

model media {
  id              Int      @id @default(autoincrement())
  title           String
  title_tl        String?
  url             String   @db.Text
  description     String?  @db.Text
  description_tl  String?  @db.Text
  thumbnail_image String?  @db.Text
  hide            Boolean? @default(false)
  created_at      DateTime @default(now()) @db.DateTime(0)
  modified_at     DateTime @default(now()) @db.DateTime(0)
  active          Boolean  @default(true)
}

model grants {
  id              Int           @id @default(autoincrement())
  member_id       Int
  book_title      String
  author          String        @db.VarChar(81)
  publisher       String        @db.VarChar(81)
  target_language String
  status          grants_status @default(WAITING)
  document_url    String        @db.Text
  rejected_at     DateTime?     @db.Timestamp(0)
  approved_at     DateTime?     @db.Timestamp(0)
  rejected_by     Int?
  approved_by     Int?
  reject_reason   String?       @db.Text
  created_at      DateTime      @default(now()) @db.Timestamp(0)
  modified_at     DateTime?     @db.Timestamp(0)
  active          Boolean       @default(true)
  members         members       @relation(fields: [member_id], references: [id], onUpdate: Restrict, map: "fk_grants_member_id")

  @@index([member_id], map: "fk_grants_member_id")
}

model banners {
  id                Int       @id @default(autoincrement())
  image_url         String    @db.Text
  image_url_english String?   @db.Text
  show_banner       Boolean   @default(true)
  redirect_url      String?   @db.Text
  created_at        DateTime  @default(now()) @db.Timestamp(0)
  modified_at       DateTime? @db.Timestamp(0)
  active            Boolean   @default(true)
}

model e_bulletins {
  id          Int       @id @default(autoincrement())
  name        String    @db.Text
  name_tl     String?   @db.Text
  url         String    @db.Text
  is_spread   Boolean   @default(false)
  created_at  DateTime  @default(now()) @db.DateTime(0)
  modified_at DateTime? @db.DateTime(0)
  active      Boolean   @default(true)
}

enum users_role {
  SUPERADMIN
  ADMIN
}

enum grants_status {
  WAITING
  REJECTED
  APPROVED
}
